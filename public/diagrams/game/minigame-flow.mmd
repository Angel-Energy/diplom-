graph TD
    A[Запуск мини-игры] --> B{Тип игры}
    
    B -->|Взлом системы| C[Python: validate_code]
    B -->|Расшифровка| D[Python: decrypt_message]
    B -->|Логическая головоломка| E[Python: solve_puzzle]
    
    C --> F[Ввод кода пользователем]
    F --> G[Chaquopy выполняет Python]
    G --> H{Код правильный?}
    H -->|Да| I[Успех: threat +1]
    H -->|Нет| J[Ошибка: повторить]
    
    D --> K[Показать зашифрованное сообщение]
    K --> L[Пользователь вводит ключ]
    L --> M[Python расшифровывает]
    M --> N{Расшифровка успешна?}
    N -->|Да| O[Успех: trust +1]
    N -->|Нет| P[Ошибка: повторить]
    
    E --> Q[Показать головоломку]
    Q --> R[Пользователь решает]
    R --> S[Python проверяет решение]
    S --> T{Решение верно?}
    T -->|Да| U[Успех: intelligence +1]
    T -->|Нет| V[Ошибка: повторить]
    
    I --> W[Сохранить результат]
    O --> W
    U --> W
    
    J --> F
    P --> L
    V --> R
    
    W --> X[Вернуться к диалогу]
    
    style A fill:#1E3A8A,stroke:#000000
    style I fill:#059669,stroke:#000000
    style O fill:#059669,stroke:#000000
    style U fill:#059669,stroke:#000000
    style X fill:#7C3AED,stroke:#000000 
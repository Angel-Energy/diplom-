graph TD
    A[Встреча с персонажем] --> B{Выбор персонажа}
    
    B -->|Елена| C[Романтическая линия Елены]
    B -->|Максим| D[Романтическая линия Максима]
    
    C --> E{Отношения с Еленой}
    E -->|Дружеские| F[Флаг: friendship_elena +1]
    E -->|Романтические| G[Флаг: romance_elena +1]
    E -->|Профессиональные| H[Флаг: professional_elena +1]
    
    D --> I{Отношения с Максимом}
    I -->|Дружеские| J[Флаг: friendship_maxim +1]
    I -->|Романтические| K[Флаг: romance_maxim +1]
    I -->|Профессиональные| L[Флаг: professional_maxim +1]
    
    F --> M[Сцена: Помощь Елене]
    G --> N[Сцена: Романтический ужин]
    H --> O[Сцена: Совместная работа]
    
    J --> P[Сцена: Спорт с Максимом]
    K --> Q[Сцена: Романтическая прогулка]
    L --> R[Сцена: Деловое партнерство]
    
    M --> S{Концовка Елены}
    N --> S
    O --> S
    
    P --> T{Концовка Максима}
    Q --> T
    R --> T
    
    S -->|Дружба| U[Концовка: Друзья навсегда]
    S -->|Любовь| V[Концовка: Счастливая пара]
    S -->|Карьера| W[Концовка: Успешное партнерство]
    
    T -->|Дружба| X[Концовка: Лучшие друзья]
    T -->|Любовь| Y[Концовка: Вместе навсегда]
    T -->|Карьера| Z[Концовка: Деловые партнеры]
    
    style A fill:#1E3A8A,stroke:#000000
    style C fill:#EC4899,stroke:#000000
    style D fill:#3B82F6,stroke:#000000
    style U fill:#059669,stroke:#000000
    style V fill:#EC4899,stroke:#000000
    style W fill:#F59E0B,stroke:#000000
    style X fill:#059669,stroke:#000000
    style Y fill:#3B82F6,stroke:#000000
    style Z fill:#F59E0B,stroke:#000000 